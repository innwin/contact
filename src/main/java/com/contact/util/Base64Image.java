package com.contact.util;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.UUID;

import org.apache.commons.io.FileUtils;

import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class Base64Image {
	public static void main(String[] args) {
		String str = GetImageStr();
		System.out.println(str);
		// String strImg = GetImageStr();
		// System.out.println(strImg);
		// GenerateImage("data:image/png;base64,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");
		// return dataURL.replace("data:image/png;base64,", "");
	}

	// 图片转化成base64字符串
	public static String GetImageStr() {// 将图片文件转化为字节数组字符串，并对其进行Base64编码处理
		String imgFile = "/Users/mac-hc/Desktop/1.png";// 待处理的图片
		InputStream in = null;
		byte[] data = null;
		// 读取图片字节数组
		try {
			in = new FileInputStream(imgFile);
			data = new byte[in.available()];
			in.read(data);
			in.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
		// 对字节数组Base64编码
		BASE64Encoder encoder = new BASE64Encoder();
		return encoder.encode(data);// 返回Base64编码过的字节数组字符串
	}

	// base64字符串转化成图片
	public static File generateImage(String imgStr) { // 对字节数组字符串进行Base64解码并生成图片
		BASE64Decoder decoder = new BASE64Decoder();
		// Base64解码
		byte[] b;
		try {
			b = decoder.decodeBuffer(imgStr);
			for (int i = 0; i < b.length; ++i) {
				if (b[i] < 0) {// 调整异常数据
					b[i] += 256;
				}
			}
			File image = File.createTempFile(UUID.randomUUID().toString(), ".png");
			image.deleteOnExit();
			FileUtils.writeByteArrayToFile(image, b);
			return image;
		} catch (IOException e) {
			e.printStackTrace();
		}
		return null;

	}
}